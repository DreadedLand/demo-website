"use strict";(()=>{var e={};e.id=222,e.ids=[222,888,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},5623:(e,t,s)=>{s.r(t),s.d(t,{config:()=>S,default:()=>f,getServerSideProps:()=>P,getStaticPaths:()=>N,getStaticProps:()=>v,reportWebVitals:()=>w,routeModule:()=>E,unstable_getServerProps:()=>q,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>A,unstable_getStaticPaths:()=>C,unstable_getStaticProps:()=>k});var a={};s.r(a),s.d(a,{default:()=>b});var r=s(7093),i=s(5244),l=s(1323),n=s(2899),d=s.n(n),c=s(2351),o=s(997),x=s(968),m=s.n(x),u=s(1664),p=s.n(u),h=s(6689),j=s(1163),g=s(4749),y=s(4309);function b(){let e=(0,j.useRouter)(),{cart:t,cartTotal:s,clearCart:a}=(0,g.j)(),{user:r}=(0,y.a)(),[i,l]=(0,h.useState)(!1),[n,d]=(0,h.useState)(""),[c,x]=(0,h.useState)({address:"",city:"",zip:"",country:"United States"}),u=async s=>{s.preventDefault(),l(!0),d("");try{let s=localStorage.getItem("token"),r=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({items:t.map(e=>({productId:e.id,quantity:e.quantity})),shippingAddress:c.address,shippingCity:c.city,shippingZip:c.zip,shippingCountry:c.country})}),i=await r.json();r.ok?(a(),e.push(`/orders/${i.orderId}?success=true`)):d(i.error||"Failed to place order")}catch(e){d("Something went wrong. Please try again.")}l(!1)};if(!r)return e.push("/login?redirect=/checkout"),null;if(0===t.length)return(0,o.jsxs)(o.Fragment,{children:[o.jsx(m(),{children:o.jsx("title",{children:"Checkout - Melodic Instruments"})}),(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center",children:[o.jsx("h1",{className:"text-3xl font-display font-bold text-secondary-900 mb-4",children:"Your cart is empty"}),o.jsx(p(),{href:"/products",className:"btn-primary",children:"Continue Shopping"})]})]});let b=s>=500?0:49.99,f=.08*s,v=s+b+f;return(0,o.jsxs)(o.Fragment,{children:[o.jsx(m(),{children:o.jsx("title",{children:"Checkout - Melodic Instruments"})}),(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("h1",{className:"section-title mb-8",children:"Checkout"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsx("div",{children:(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-secondary-900 mb-6",children:"Shipping Information"}),n&&o.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600",children:n}),(0,o.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Street Address"}),o.jsx("input",{type:"text",required:!0,value:c.address,onChange:e=>x({...c,address:e.target.value}),className:"input-field",placeholder:"123 Music Lane"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"City"}),o.jsx("input",{type:"text",required:!0,value:c.city,onChange:e=>x({...c,city:e.target.value}),className:"input-field",placeholder:"Nashville"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"ZIP Code"}),o.jsx("input",{type:"text",required:!0,value:c.zip,onChange:e=>x({...c,zip:e.target.value}),className:"input-field",placeholder:"37203"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Country"}),(0,o.jsxs)("select",{value:c.country,onChange:e=>x({...c,country:e.target.value}),className:"input-field",children:[o.jsx("option",{children:"United States"}),o.jsx("option",{children:"Canada"}),o.jsx("option",{children:"United Kingdom"}),o.jsx("option",{children:"Australia"}),o.jsx("option",{children:"Germany"}),o.jsx("option",{children:"France"})]})]}),o.jsx("hr",{className:"my-6"}),o.jsx("h2",{className:"text-lg font-semibold text-secondary-900 mb-4",children:"Payment Information"}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Card Number"}),o.jsx("input",{type:"text",className:"input-field",placeholder:"4242 4242 4242 4242",defaultValue:"4242 4242 4242 4242"}),o.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"Demo mode - no real payment"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Expiry Date"}),o.jsx("input",{type:"text",className:"input-field",placeholder:"MM/YY",defaultValue:"12/28"})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"CVC"}),o.jsx("input",{type:"text",className:"input-field",placeholder:"123",defaultValue:"123"})]})]}),o.jsx("button",{type:"submit",disabled:i,className:"btn-primary w-full mt-6 disabled:opacity-50",children:i?"Processing...":`Place Order â€¢ $${v.toFixed(2)}`})]})]})}),o.jsx("div",{children:(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-24",children:[o.jsx("h2",{className:"text-lg font-semibold text-secondary-900 mb-4",children:"Order Summary"}),o.jsx("div",{className:"space-y-4 max-h-64 overflow-auto",children:t.map(e=>(0,o.jsxs)("div",{className:"flex gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:o.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"})}),(0,o.jsxs)("div",{className:"flex-grow",children:[o.jsx("p",{className:"font-medium text-secondary-900",children:e.name}),(0,o.jsxs)("p",{className:"text-sm text-secondary-500",children:["Qty: ",e.quantity]})]}),(0,o.jsxs)("p",{className:"font-medium text-secondary-900",children:["$",(e.price*e.quantity).toLocaleString()]})]},e.id))}),o.jsx("hr",{className:"my-4"}),(0,o.jsxs)("div",{className:"space-y-2 text-secondary-600",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Subtotal"}),(0,o.jsxs)("span",{children:["$",s.toLocaleString()]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Shipping"}),o.jsx("span",{children:0===b?"FREE":`$${b}`})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Tax"}),(0,o.jsxs)("span",{children:["$",f.toFixed(2)]})]})]}),o.jsx("hr",{className:"my-4"}),(0,o.jsxs)("div",{className:"flex justify-between text-lg font-bold text-secondary-900",children:[o.jsx("span",{children:"Total"}),(0,o.jsxs)("span",{children:["$",v.toFixed(2)]})]})]})})]})]})]})}let f=(0,l.l)(a,"default"),v=(0,l.l)(a,"getStaticProps"),N=(0,l.l)(a,"getStaticPaths"),P=(0,l.l)(a,"getServerSideProps"),S=(0,l.l)(a,"config"),w=(0,l.l)(a,"reportWebVitals"),k=(0,l.l)(a,"unstable_getStaticProps"),C=(0,l.l)(a,"unstable_getStaticPaths"),A=(0,l.l)(a,"unstable_getStaticParams"),q=(0,l.l)(a,"unstable_getServerProps"),_=(0,l.l)(a,"unstable_getServerSideProps"),E=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/checkout",pathname:"/checkout",bundlePath:"",filename:""},components:{App:c.default,Document:d()},userland:a})},5244:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[567,424,899,245],()=>s(5623));module.exports=a})();