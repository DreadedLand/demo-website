(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{3308:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return t(3169)}])},3316:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var r=t(5893),a=t(1664),l=t.n(a);t(5675);var c=t(977);function i(e){let{product:s}=e,{addToCart:t}=(0,c.j)();return(0,r.jsxs)(l(),{href:"/products/".concat(s.slug),className:"card group overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative h-64 bg-gray-100 overflow-hidden",children:[(0,r.jsx)("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),1===s.featured&&(0,r.jsx)("span",{className:"absolute top-3 left-3 bg-primary-600 text-white text-xs font-semibold px-2 py-1 rounded",children:"Featured"}),s.stock<=3&&s.stock>0&&(0,r.jsx)("span",{className:"absolute top-3 right-3 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded",children:"Low Stock"}),0===s.stock&&(0,r.jsx)("span",{className:"absolute top-3 right-3 bg-gray-500 text-white text-xs font-semibold px-2 py-1 rounded",children:"Out of Stock"})]}),(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("span",{className:"text-xs text-primary-600 font-medium uppercase tracking-wide",children:s.category_name}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-secondary-900 mt-1 group-hover:text-primary-600 transition-colors",children:s.name}),(0,r.jsx)("p",{className:"text-secondary-500 text-sm mt-2 line-clamp-2",children:s.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-secondary-900",children:["$",s.price.toLocaleString()]}),(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),t(s)},disabled:0===s.stock,className:"p-2 rounded-lg transition-colors ".concat(0===s.stock?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-primary-100 text-primary-600 hover:bg-primary-600 hover:text-white"),children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})})]})]})]})}},3169:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var r=t(5893),a=t(9008),l=t.n(a),c=t(7294),i=t(1163),n=t(3316);function o(){let e=(0,i.useRouter)(),{category:s,search:t}=e.query,[a,o]=(0,c.useState)([]),[d,x]=(0,c.useState)([]),[u,m]=(0,c.useState)(!0),[h,p]=(0,c.useState)(""),[g,j]=(0,c.useState)("newest"),[f,v]=(0,c.useState)("all");(0,c.useEffect)(()=>{fetch("/api/categories").then(e=>e.json()).then(x)},[]),(0,c.useEffect)(()=>{e.isReady&&(p(s||""),y())},[e.isReady,s,t]);let y=async()=>{m(!0);let e="/api/products?";s&&(e+="category=".concat(s,"&")),t&&(e+="search=".concat(t,"&"));let r=await fetch(e);o(await r.json()),m(!1)},N=s=>{p(s);let t={...e.query};s?t.category=s:delete t.category,e.push({pathname:"/products",query:t},void 0,{shallow:!0})},b=a.filter(e=>"under100"===f?e.price<100:"100to500"===f?e.price>=100&&e.price<500:"500to1000"===f?e.price>=500&&e.price<1e3:"1000to5000"===f?e.price>=1e3&&e.price<5e3:"over5000"!==f||e.price>=5e3).sort((e,s)=>"priceLow"===g?e.price-s.price:"priceHigh"===g?s.price-e.price:"name"===g?e.name.localeCompare(s.name):new Date(s.created_at)-new Date(e.created_at));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Products - Melodic Instruments"}),(0,r.jsx)("meta",{name:"description",content:"Browse our collection of premium musical instruments."})]}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"section-title",children:t?'Search Results for "'.concat(t,'"'):"All Products"}),(0,r.jsxs)("p",{className:"mt-2 text-secondary-600",children:[b.length," products found"]})]}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,r.jsx)("aside",{className:"lg:w-64 flex-shrink-0",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-24",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-secondary-900 mb-3",children:"Categories"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("button",{onClick:()=>N(""),className:"block w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ".concat(h?"text-secondary-600 hover:bg-gray-100":"bg-primary-100 text-primary-700"),children:"All Categories"}),d.map(e=>(0,r.jsx)("button",{onClick:()=>N(e.slug),className:"block w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ".concat(h===e.slug?"bg-primary-100 text-primary-700":"text-secondary-600 hover:bg-gray-100"),children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-secondary-900 mb-3",children:"Price Range"}),(0,r.jsxs)("select",{value:f,onChange:e=>v(e.target.value),className:"w-full input-field text-sm",children:[(0,r.jsx)("option",{value:"all",children:"All Prices"}),(0,r.jsx)("option",{value:"under100",children:"Under $100"}),(0,r.jsx)("option",{value:"100to500",children:"$100 - $500"}),(0,r.jsx)("option",{value:"500to1000",children:"$500 - $1,000"}),(0,r.jsx)("option",{value:"1000to5000",children:"$1,000 - $5,000"}),(0,r.jsx)("option",{value:"over5000",children:"Over $5,000"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-secondary-900 mb-3",children:"Sort By"}),(0,r.jsxs)("select",{value:g,onChange:e=>j(e.target.value),className:"w-full input-field text-sm",children:[(0,r.jsx)("option",{value:"newest",children:"Newest"}),(0,r.jsx)("option",{value:"priceLow",children:"Price: Low to High"}),(0,r.jsx)("option",{value:"priceHigh",children:"Price: High to Low"}),(0,r.jsx)("option",{value:"name",children:"Name"})]})]})]})}),(0,r.jsx)("div",{className:"flex-grow",children:u?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,r.jsxs)("div",{className:"card animate-pulse",children:[(0,r.jsx)("div",{className:"h-64 bg-gray-200"}),(0,r.jsxs)("div",{className:"p-5 space-y-3",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"})]})]},s))}):b.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(e=>(0,r.jsx)(n.Z,{product:e},e.id))}):(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("svg",{className:"w-16 h-16 text-secondary-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 mb-2",children:"No products found"}),(0,r.jsx)("p",{className:"text-secondary-600",children:"Try adjusting your filters or search term"})]})})]})]})]})}}},function(e){e.O(0,[959,888,774,179],function(){return e(e.s=3308)}),_N_E=e.O()}]);