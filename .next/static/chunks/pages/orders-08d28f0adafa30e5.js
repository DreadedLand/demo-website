(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{9159:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orders",function(){return t(3255)}])},3255:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var r=t(5893),a=t(9008),n=t.n(a),c=t(1664),d=t.n(c),o=t(7294),l=t(9548),i=t(1163);function x(){let{user:e,loading:s}=(0,l.a)(),t=(0,i.useRouter)(),[a,c]=(0,o.useState)([]),[x,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{s||e?e&&h():t.push("/login?redirect=/orders")},[e,s]);let h=async()=>{let e=localStorage.getItem("token"),s=await fetch("/api/orders",{headers:{Authorization:"Bearer ".concat(e)}});s.ok&&c(await s.json()),u(!1)},m=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-700";case"processing":return"bg-blue-100 text-blue-700";case"shipped":return"bg-purple-100 text-purple-700";case"delivered":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return s||x?(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"My Orders - Melodic Instruments"})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("h1",{className:"section-title mb-8",children:"My Orders"}),0===a.length?(0,r.jsxs)("div",{className:"text-center py-16 bg-white rounded-xl shadow-sm",children:[(0,r.jsx)("svg",{className:"w-16 h-16 text-secondary-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-secondary-900 mb-2",children:"No orders yet"}),(0,r.jsx)("p",{className:"text-secondary-600 mb-6",children:"Start shopping to see your orders here."}),(0,r.jsx)(d(),{href:"/products",className:"btn-primary",children:"Browse Products"})]}):(0,r.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,r.jsx)(d(),{href:"/orders/".concat(e.id),className:"block bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold text-secondary-900",children:["Order #",e.id]}),(0,r.jsx)("p",{className:"text-sm text-secondary-500 mt-1",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium capitalize ".concat(m(e.status)),children:e.status}),(0,r.jsxs)("span",{className:"text-lg font-bold text-secondary-900",children:["$",e.total.toLocaleString()]}),(0,r.jsx)("svg",{className:"w-5 h-5 text-secondary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},e.id))})]})]})}},9008:function(e,s,t){e.exports=t(3867)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9159)}),_N_E=e.O()}]);